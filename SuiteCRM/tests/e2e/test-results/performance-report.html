
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MakeDealCRM E2E Performance Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .header { background: #8e44ad; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .metric-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .metric-value { font-size: 2em; font-weight: bold; color: #8e44ad; }
        .metric-label { color: #7f8c8d; font-size: 0.9em; }
        .insights { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .insight { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .insight.error { background: #ffebee; border-left: 4px solid #f44336; }
        .insight.warning { background: #fff3e0; border-left: 4px solid #ff9800; }
        .insight.info { background: #e3f2fd; border-left: 4px solid #2196f3; }
        .charts { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .chart-container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .table-container { background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); overflow: hidden; margin-bottom: 20px; }
        .table-container table { width: 100%; border-collapse: collapse; }
        .table-container th, .table-container td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        .table-container th { background: #f8f9fa; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <h1>MakeDealCRM E2E Performance Report</h1>
        <p>Performance analysis generated on 2025-07-26T17:54:42.431Z</p>
    </div>

    <div class="metrics">
        <div class="metric-card">
            <div class="metric-value">22s</div>
            <div class="metric-label">Total Execution Time</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">15357ms</div>
            <div class="metric-label">Average Test Duration</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">60MB</div>
            <div class="metric-label">Peak Memory Usage</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">2</div>
            <div class="metric-label">Slow Tests (>10s)</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">0</div>
            <div class="metric-label">Flaky Tests</div>
        </div>
        <div class="metric-card">
            <div class="metric-value">50.0%</div>
            <div class="metric-label">Failure Rate</div>
        </div>
    </div>

    <div class="insights">
        <h3>Performance Insights</h3>
        
            <div class="insight warning">
                <strong>Average test duration (15357ms) is above recommended 5s threshold</strong><br>
                <em>Recommendation: Consider optimizing slow tests or breaking them into smaller units</em>
            </div>
        
        
        <h3>Stability Insights</h3>
        
            <div class="insight error">
                <strong>High failure rate: 50.0%</strong><br>
                <em>Recommendation: Investigate and fix consistently failing tests</em>
            </div>
        
        
        <h3>Resource Insights</h3>
        
    </div>

    <div class="charts">
        <div class="chart-container">
            <h3>Test Duration Distribution</h3>
            <canvas id="durationChart" width="400" height="200"></canvas>
        </div>
        <div class="chart-container">
            <h3>Memory Usage Over Time</h3>
            <canvas id="memoryChart" width="400" height="200"></canvas>
        </div>
    </div>

    
    <div class="table-container">
        <h3 style="padding: 20px; margin: 0; background: #f8f9fa;">Slowest Tests</h3>
        <table>
            <thead>
                <tr>
                    <th>Test</th>
                    <th>Duration</th>
                    <th>Project</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                
                    <tr>
                        <td> › chromium › deals/test-deal-detail-access.spec.js › Deal Detail View Access › should navigate between pipeline and detail view seamlessly</td>
                        <td>10099ms</td>
                        <td>chromium</td>
                        <td>passed</td>
                    </tr>
                
                    <tr>
                        <td> › chromium › deals/test-deal-detail-access.spec.js › Deal Detail View Access › should open deal details in same window with proper access</td>
                        <td>20614ms</td>
                        <td>chromium</td>
                        <td>failed</td>
                    </tr>
                
            </tbody>
        </table>
    </div>

    

    <script>
        // Duration distribution histogram
        const durationCtx = document.getElementById('durationChart').getContext('2d');
        const durations = [10099,20614];
        
        // Create buckets for histogram
        const buckets = [0, 1000, 2000, 5000, 10000, 30000, Infinity];
        const bucketLabels = ['<1s', '1-2s', '2-5s', '5-10s', '10-30s', '>30s'];
        const bucketCounts = new Array(buckets.length - 1).fill(0);
        
        durations.forEach(duration => {
            for (let i = 0; i < buckets.length - 1; i++) {
                if (duration >= buckets[i] && duration < buckets[i + 1]) {
                    bucketCounts[i]++;
                    break;
                }
            }
        });

        new Chart(durationCtx, {
            type: 'bar',
            data: {
                labels: bucketLabels,
                datasets: [{
                    label: 'Test Count',
                    data: bucketCounts,
                    backgroundColor: '#8e44ad'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Memory usage chart (simplified)
        const memoryCtx = document.getElementById('memoryChart').getContext('2d');
        const startMB = 40;
        const peakMB = 60;
        const endMB = 62;

        new Chart(memoryCtx, {
            type: 'line',
            data: {
                labels: ['Start', 'Peak', 'End'],
                datasets: [{
                    label: 'Memory Usage (MB)',
                    data: [startMB, peakMB, endMB],
                    backgroundColor: 'rgba(142, 68, 173, 0.2)',
                    borderColor: '#8e44ad',
                    borderWidth: 2,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>